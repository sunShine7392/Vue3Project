var H=Object.defineProperty,J=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var w=(o,l,s)=>l in o?H(o,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[l]=s,N=(o,l)=>{for(var s in l||(l={}))Z.call(l,s)&&w(o,s,l[s]);if(U)for(var s of U(l))ee.call(l,s)&&w(o,s,l[s]);return o},V=(o,l)=>J(o,Y(l));import{_ as ae,d as te,r as c,S as z,G as oe,i as F,b as a,g as d,U as le,o as f,a as e,y as p,P as T,V as ue,h,W as re,Q as se,R as ne,c as de,m as x,p as ie,l as ce,M as pe,K as S}from"./index.fbf6442c.js";import{g as me,b as _e,d as ge,u as ve,a as fe}from"./tools.d2514f2a.js";import"./request.59cff57c.js";import"./index.becf6c0c.js";const Ce=o=>(ie("data-v-a1aeb56c"),o=o(),ce(),o),be=x(" \u6DFB\u52A0\u54C1\u724C "),ke={class:"image-slot"},Fe=["src"],he=Ce(()=>h("div",{class:"el-upload__tip"}," \u53EA\u80FD\u4E0A\u4F20jpg/png\u6587\u4EF6\uFF0C\u4E14\u4E0D\u8D85\u8FC7200kb ",-1)),xe={class:"dialog-footer"},ye=x("\u53D6\u6D88"),De=x(" \u786E\u5B9A "),Ee={name:"XTrademark"},Ae=te(V(N({},Ee),{setup(o){const l=u=>{pe.confirm(`\u60A8\u786E\u8BA4\u8981\u5220\u9664 ${u.tmName} \u5417?`,"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{await ge(u.id),_(),S.success("\u5220\u9664\u54C1\u724C\u6210\u529F")}).catch(()=>{})},s=async()=>{await g.value.validate();const{tmName:u,logoUrl:t,id:i}=n;i?await ve(n):await fe(u,t),S.success(`${i?"\u4FEE\u6539":"\u6DFB\u52A0"}\u54C1\u724C\u6210\u529F`),m.value=!1,_()},g=c(),n=z({tmName:"",logoUrl:"",id:0}),L=z({tmName:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",trigger:"blur"},{min:2,max:10,message:"\u54C1\u724C\u540D\u79F0\u5FC5\u987B\u4E3A2-10\u4F4D",trigger:"blur"}],logoUrl:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247LOGO"}]}),O="/app-prod",$=u=>{n.logoUrl=u.data,g.value.clearValidate(["logoUrl"])},m=c(!1),y=u=>{var t;n.tmName=u.tmName,n.logoUrl=u.logoUrl,n.id=u.id,m.value=!0,(t=g.value)==null||t.clearValidate()},R=()=>{m.value=!1},D=c([]),C=c(!1),b=c(1),k=c(3),E=c(0),_=async()=>{C.value=!0;const u=await me(b.value,k.value);E.value=u.total,D.value=u.records,C.value=!1};return oe(_),(u,t)=>{const i=d("el-button"),v=d("el-table-column"),A=d("el-icon"),G=d("el-image"),I=d("el-table"),M=d("el-pagination"),j=d("el-input"),B=d("el-form-item"),q=d("el-upload"),P=d("el-form"),K=d("el-dialog"),Q=d("el-card"),W=le("loading");return f(),F(Q,{shadow:"hover"},{default:a(()=>[e(i,{type:"primary",icon:p(T),onClick:t[0]||(t[0]=r=>y({id:0,tmName:"",logoUrl:""}))},{default:a(()=>[be]),_:1},8,["icon"]),ue((f(),F(I,{data:D.value,border:"",class:"mt-20","row-key":"id"},{default:a(()=>[e(v,{label:"\u5E8F\u53F7",type:"index",width:"60",align:"center"}),e(v,{prop:"tmName",label:"\u54C1\u724C\u540D\u79F0"}),e(v,{label:"\u54C1\u724CLOGO"},{default:a(({row:r})=>[e(G,{src:r.logoUrl,fit:"fill",loading:"lazy",class:"trademark-logo"},{error:a(()=>[h("div",ke,[e(A,null,{default:a(()=>[e(p(re))]),_:1})])]),_:2},1032,["src"])]),_:1}),e(v,{label:"\u64CD\u4F5C"},{default:a(({row:r})=>[e(i,{type:"warning",icon:p(se),size:"small",onClick:X=>y(r)},null,8,["icon","onClick"]),e(i,{type:"danger",icon:p(ne),size:"small",onClick:X=>l(r)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[W,C.value]]),e(M,{class:"mt-20","current-page":b.value,"onUpdate:current-page":t[1]||(t[1]=r=>b.value=r),"page-size":k.value,"onUpdate:page-size":t[2]||(t[2]=r=>k.value=r),"page-sizes":[3,6,9,12],layout:"prev, pager, next, jumper, ->, sizes, total",total:E.value,onSizeChange:_,onCurrentChange:_},null,8,["current-page","page-size","total"]),e(K,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=r=>m.value=r),title:`${n.id?"\u4FEE\u6539":"\u6DFB\u52A0"}\u54C1\u724C`},{footer:a(()=>[h("span",xe,[e(i,{onClick:R},{default:a(()=>[ye]),_:1}),e(i,{type:"primary",onClick:s},{default:a(()=>[De]),_:1})])]),default:a(()=>[e(P,{"label-width":"100px",ref_key:"trademarkFormRef",ref:g,model:n,rules:L},{default:a(()=>[e(B,{label:"\u54C1\u724C\u540D\u79F0",prop:"tmName"},{default:a(()=>[e(j,{placeholder:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",class:"trademark-input",modelValue:n.tmName,"onUpdate:modelValue":t[3]||(t[3]=r=>n.tmName=r)},null,8,["modelValue"])]),_:1}),e(B,{label:"\u54C1\u724CLOGO",prop:"logoUrl"},{default:a(()=>[e(q,{class:"avatar-uploader",action:p(O)+"/admin/product/upload","show-file-list":!1,"on-success":$,"before-upload":p(_e)},{tip:a(()=>[he]),default:a(()=>[n.logoUrl?(f(),de("img",{key:0,src:n.logoUrl,class:"avatar"},null,8,Fe)):(f(),F(A,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[e(p(T))]),_:1}))]),_:1},8,["action","before-upload"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])]),_:1})}}}));var ze=ae(Ae,[["__scopeId","data-v-a1aeb56c"]]);export{ze as default};
